##                             Лабораторная работа 2. Создание и настройка Composer-проекта

### Создание новой ветки в локальном Git-репозитории
* Создать в локальном репозитории ветку Task02. Далее работать в этой ветке в каталоге Task02.

### Установка пакетного менеджера Composer
* Установить на своем компьютере Composer. Установка должна быть глобальной, чтобы утилита была доступнa из любого каталога по команде `composer`.

### Создание Composer-проекта (пакета)
* Создать каталог для своего проекта с именем разрабатываемой игры (Task02/tic-tac-toe, Task02/guess-number, Task02/hangman, Task02/cold-hot, Task02/minesweeper).
    * Исходный код должен храниться в подкаталоге src.
    * Запускной PHP-файл для игры должен находиться в подкаталоге bin.
* Инициализировать проект с помощью Composer (команда `composer init`).
* С помощью `composer require` установить и подключить в зависимости проекта библиотеку wp-cli/php-cli-tools, упрощающую разработку консольных программ (можно использовать функции `line()` и `prompt()` для вывода/ввода строк). Изучить документацию к этой библиотеке на GitHub.
* Создать в папке bin исполняемый (запускной) PHP-скрипт с именем из спецификации к игре (tic-tac-toe, guess-number, hangman, cold-hot, minesweeper). В этом файле должны автоматически загружаться все нужные файлы проекта и вызываться функция `startGame()` для запуска игры.
* Создать модули src/Controller.php и src/View.php, назначить пространства имен *GitHub_login\Game_name*\Controller и *GitHub_login\Game_name*\View. Обратите внимание, что в названиях пространств имен не должно быть знаков тире.
* Добавить в модуль Controller функцию `startGame()` для инициализации игры и вывода начального экрана игры (сам экран должен выводиться функцией из модуля View).

### Настройка исполняемых файлов проекта
* Добавить в composer.json параметр "bin", в качестве значения указать массив с именами файлов, которые Composer при установке пакета из Packagist сделает исполняемыми. Пока в этом массиве должен быть один запускной скрипт игры.
* Для того, чтобы исполняемый файл получился кроссплатформенным, в первую строку запускного скрипта нужно добавить шебанг `#!/usr/bin/env php`.

### Настройка автозагрузки файлов проекта
* Добавить в composer.json параметр "autoload" с вложенным параметром "files". В качестве значения "files" указать массив с именами файлов для автозагрузки. Пока в этом массиве должен быть файлы с модулями Controller и View.
* Выполнить команду `composer dump-autoload -o` для генерации в файле vendor/autoload.php кода автозагрузки всех нужных файлов.
* В запускном скрипте:
    * добавить код для загрузки файлов из vendor/autoload.php;
    * импортировать функцию `startGame()` из пространства имён *GitHub_login\Game_name*\Controller;
    * вызвать функцию `startGame()`.


### Настройка Git
* В репозитории не должно быть временных файлов и каталогов, а также файлов внешних зависимостей (каталог vendor), подключенных в проекте. Все лишние файлы и каталоги нужно указать в файле .gitignore, чтобы Git их игнорировал.

### Доработка документации проекта
* В файле README.md кроме описания игры должно быть описано окружение, необходимое для запуска проекта (PHP с указанием минимальной версии и нужных настроек в php.ini, Composer и т.д.), а также команды, которые требуется выполнить для подготовки и запуска проекта после его загрузки из GitHub или после установки в качестве пакета с сайта Packagist.

### Публикация пакета на Packagist
* Создать в своем профиле на GitHub отдельный репозиторий для игры.
* Скопировать туда созданный проект.
* Добавить номер версии (релиза) с помощью команд `git tag -a v1.0 -m "Version 1.0"` и `git push --tags`.
* Зарегистрироваться на Packagist.
* Создать новый пакет на Packagist, связав его с репозиторием своей игры на GitHub.
* Установить опубликованный пакет локально и глобально, проверить запуск игры из командной строки (без указания интерпретатора). Разобраться с механизмом подобного запуска.
* Добавить ссылку на опубликованный пакет в файл README.md.

### Отправка задания на проверку
* Отправить созданный коммит в "форкнутый" репозиторий на GitHub (`git push origin`).
* Сделать Pull Request для добавления ветки Task02 из репозитория в вашем профиле в https://github.com/andpop-mrsu.
* Задание будет считаться принятым после закрытия Pull Request в https://github.com/andpop-mrsu.
* После принятия задания преподавателем синхронизировать с оригинальным свой локальный репозиторий (`git pull upstream master`), потом репозиторий в своем профиле GitHub (`git push origin master`).


* * *
### Лекции
* "Composer в PHP: установка пакетов, автозагрузка файлов и классов" https://www.youtube.com/watch?v=6dA7Ti2o33M
* "Исполняемые файлы в Windows и Unix-подобных системах" https://youtu.be/yuSveRKLUzg

* * *
### Темы для изучения
* Работа с пакетами для приложений на языке PHP. Пакетный менеджер Composer и основной репозиторий пакетов Packagist.org.
    * Д. Локхарт "Современный PHP. Новые возможности и передовой опыт", глава 4. М.: ДМК Пресс, 2016.
    * Д. Скляр, А. Трахтенберг "PHP. Рецепты программирования", 3-е изд., глава 27. СПб.: Питер, 2015.
    * <https://books.goalkicker.com/PHPBook/> Электронная книга "PHP Notes for Professionals", глава 41.
* Пространства имен и файловая структура PHP-приложений.
    * Д.В. Котеров, И.В. Симдянов "PHP 7 в подлиннике", глава 25. СПб.: БХВ-Петербург, 2016.
* Автозагрузка модулей и импорт функций в PHP-приложениях.
    * Д. Локхарт "Современный PHP. Новые возможности и передовой опыт" М.: ДМК Пресс, 2016.
* Типы исполняемых файлов в операционных системах.
* Разделение интерпретируемого приложения на исполняемые скрипты и подключаемые модули.
    * <https://ru.hexlet.io/blog/posts/skripty-moduli-i-biblioteki> К. Мокевнин "Скрипты, модули и библиотеки"

* * *
### Полезные ссылки
* Пример консольного PHP-приложения, оформленного в виде пакета и опубликованного на Packagist.org.
    * <https://github.com/andpop/php-project-lvl1> Репозиторий на GitHub
    * <https://packagist.org/packages/andpop/php-project-1> Пакет на Packagist
